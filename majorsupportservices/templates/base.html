<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ADDReSS - Nutrition Dashboard</title>

    <!-- Bootstrap CSS (added) -->
    <!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"> -->

    <link href="{{url_for('static', filename='css/styles.css')}}" rel="stylesheet">
    <link href="{{url_for('static', filename='css/recipes-styles.css')}}" rel="stylesheet">
    <!-- <link href="{{url_for('static', filename='css/admin.css')}}" rel="stylesheet"> -->
    <!-- External Font Awesome Icons - CDN dependency -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />    
</head>

<body>
    
    <nav class="sidebar">
        {% set active_page = active_page|default('index') -%}
        <div class="sidebar-header">
            <!-- Organization Branding - Static Content -->
            <div class="organization">
                <img src="static/images/dost_logo.png" alt="DOST Logo" class="dost-logo">
                <span class="dost-text">DOST-FNRI</span>
            </div>
            <div class="divider"></div>
            <!-- Application Logo and Title - Static Content -->
            <div class="logo">
                <a href="{{url_for('index.dashboard')}}">
                    <img src="static/images/address_logo.jpg" alt="ADDReSS Logo" class="address-logo">
                </a>
                <div class="logo-content">
                    <span class="logo-text">ADDReSS</span>
                    <span class="logo-subtitle">Automated Diet Decoder and Recommender System Software</span>
                </div>
            </div>
        </div>
        
        <div class="sidebar-content">
            

            {% set my_name = my_name|default('Your Name') -%}

            {% if user_type == 'admin' %}
                {% set role_name = "Admin" %}
            {% elif user_type == 'client' %}
                {% set role_name = "Client" %}
            {% elif user_type == 'nutritionist_dieticians' %}
                {% set role_name = "RND (Registered Nutritionist-Dietitian)" %}
            {% elif user_type == 'head_nutritionist_dieticians' %}
                {% set role_name = "Head RND (Registered Nutritionist-Dietitian)" %}
            {% else %}
                {% set role_name = user_type %}
            {% endif %}

            <!-- 
            ===========================================
            NAVIGATION MENU
            ===========================================
            Main navigation items for different sections of the app.
            BACKEND INTEGRATION NOTES:
            - Active state should be managed dynamically based on current page
            - Navigation items should trigger page/content switching via JavaScript
            - Consider adding data attributes for easier JavaScript targeting
            -->
            
            <div class="nav-section">
                
                {% if user_type in ['admin','client','nutritionist_dieticians','head_nutritionist_dieticians'] %}
                    <div class="nav-item {% if active_page == 'index' %} active {% else %} {% endif %}" data-page="dashboard" id='dashboard-page' data-url="{{url_for('index.dashboard')}}">
                        <i class="fas fa-home nav-icon"></i>
                        <span class="nav-label">Dashboard</span>
                    </div>
                {% endif %}


                {% if user_type in ['admin','client'] %}
                    <div class="nav-item {% if active_page == 'profile' %} active {%else%} {% endif %}" data-page="profile" id="profile-page" data-url="{{url_for('profile.index')}}">
                        <i class="fas fa-user nav-icon"></i>
                        <span class="nav-label">Profile</span>
                    </div>
                {% endif %}

                {% if user_type in ['admin','nutritionist_dieticians'] %}
                    <div class="nav-item {% if active_page == 'anthrop_table' %} active {%else%} {% endif %}" data-page="profile" id="profile-page" data-url="{{url_for('anthrop_table.index')}}">
                        <i class="fas fa-user nav-icon"></i>
                        <span class="nav-label">Profile</span>
                    </div>
                     <div class="nav-item {% if active_page == 'food record table' %} active {%else%} {% endif %}" data-page="food-log" id="dietary-page" data-url="{{url_for('food_record_table.index')}}">
                        <i class="fas fa-utensils nav-icon"></i>
                        <span class="nav-label">Food Log</span>
                    </div>

                     <div class="nav-item {% if active_page == 'food recommender table' %} active {%else%} {% endif %}" data-page="recipes" id="recipes-page" data-url="{{url_for('food_recommender_table.index')}}">
                        <i class="fas fa-book nav-icon"></i>
                        <span class="nav-label">Recipes</span>
                    </div>
                {% endif %}
                

            
                {% if user_type in ['admin','client'] and user_details != "" %}
                    <div class="nav-item {% if active_page == 'dietary' %} active {%else%} {% endif %}" data-page="food-log" id="dietary-page" data-url="{{url_for('dietary.index')}}">
                        <i class="fas fa-utensils nav-icon"></i>
                        <span class="nav-label">Food Log</span>
                    </div>

                    <div class="nav-item {% if active_page == 'food reco' %} active {%else%} {% endif %}" data-page="recipes" id="recipes-page" data-url="{{url_for('food_recommender.index')}}">
                        <i class="fas fa-book nav-icon"></i>
                        <span class="nav-label">Recipes</span>
                    </div>
                {% endif %}
                
                {% if user_type in ['head_nutritionist_dieticians'] %}
                    <div class="nav-item {% if active_page == 'food record table' %} active {%else%} {% endif %}" data-page="food-log" id="dietary-page" data-url="{{url_for('food_record_table.index')}}">
                        <i class="fas fa-utensils nav-icon"></i>
                        <span class="nav-label">Food Log</span>
                    </div>
                {% endif %}


                {% if user_type in ['admin'] %}
                <div class="nav-item" data-page="admin" id="admin-page" data-url="{{url_for('admin_dashboard.index')}}">
                    <i class="fas fa-cog nav-icon"></i>
                    <span class="nav-label">Admin Page</span>
                </div>
                {% endif %}
            </div>
            
            <!-- 
            ===========================================
            USER PROFILE SECTION
            ===========================================
            Displays current user information in the sidebar.
            BACKEND INTEGRATION NOTES:
            - User name should be fetched from user session/profile API
            - User status/role should be dynamic (Member, Admin, etc.)
            - Avatar could be user-uploaded image or default icon
            - Consider adding click handler for profile dropdown/settings
            -->
            {% if user_type in ['client','nutritionist_dieticians','head_nutritionist_dieticians'] %}
            <div class="sidebar-footer">
                <div class="user-profile" data-url="{{url_for('dietary.index')}}">
                    <div class="user-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="user-info">
                        <!-- TODO: Replace with dynamic user data from API -->
                        <div class="user-name">{{userLogged}}</div>
                        <div class="user-status">{{role_name}}</div>
                       
                        <div class="sign-out">
                            <a href="{{url_for('auth.logout')}}">
                                <i class="fas fa-sign-out-alt"></i>
                                <span>Sign Out</span>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            {% endif %}
        </div>
    </nav>
    
    <div class="main-wrapper">
        <header class="header">
            <div class="header-content">
                <div class="welcome-section">
                    <!-- TODO: Replace with dynamic user name from API -->
                     {% if active_page == 'index'%}
                        <h1 class="welcome-title welcome-back">Welcome back, {{ my_name }}!</h1>
                        <!-- TODO: Personalize based on user goals/preferences -->
                        <p class="welcome-subtitle welcome-desc">Let's track your nutrition journey today</p>
                    {% elif active_page == 'profile' or active_page == 'anthrop_table' %}
                        <h1 class="welcome-title welcome-back">Profile</h1>
                        <!-- TODO: Personalize based on user goals/preferences -->
                        <p class="welcome-subtitle welcome-desc">Track your body measurements and requirements</p>
                    {% elif active_page == 'dietary' or active_page == 'food record table'%}
                         <h1 class="welcome-title">Food Log</h1>
                         <p class="welcome-subtitle">Track your daily nutrition intake</p>
                    {% elif active_page == 'food reco' or active_page == 'food recommender table'%}
                        <h1 class="welcome-title">Recipes</h1>
                        <p class="welcome-subtitle">Discover healthy and delicious meal ideas</p>
                    {% endif %}
                </div>
                {% if active_page == 'index' %}
                <div class="notification-icon">
                    <div class="notification-badge desktop-account-settings" id="desktopAccountsettings" data-url="{{url_for('account_settings.index')}}">
                        <span class="flame-icon">
                            <i class="fas fa-cog"></i>
                        </span>
                    </div>
                    <div class="notification-badge" id="streakbtn" data-meal-logged = "{{complete_meal_logged}}">
                        <span class="flame-icon">ðŸ”¥</span>
                        <!-- TODO: Replace with dynamic notification count from API -->
                        <span class="notification-count">{{streak_days}}</span>
                    </div>
                </div>
                {% elif active_page == 'food reco' %}
                    <section style="display: flex; justify-content: center; margin: 32px 0;">
                        <button class="contact-rnd-btn-large" id="contact-rnd-recipes-btn">
                            <i class="fas fa-phone" style="font-size: 1.3em;"></i>
                            Contact RND
                        </button>
                    </section>
                {% endif %}
            </div>
        </header>
        {% block content %}{% endblock %}
    </div>
    <nav class="bottom-nav">
        <!-- TODO: Add click handlers for navigation -->
        <div class="user-profile dropdown" data-url="{{url_for('dietary.index')}}">
            <div class="user-avatar dropdown-toggle" onclick="toggleUserDropdown()">
                <i class="fas fa-user"></i>
            </div>
           
            <div class="dropdown-menu" id="userDropdownMenu">
                <div class="dropdown-item">
                    <a href="{{url_for('auth.logout')}}">
                        <i class="fas fa-sign-out-alt"></i>
                        <span>Sign Out</span>
                    </a>
                </div>
            </div>
        </div>
       
        <div class="nav-item {% if active_page == 'index' %} active {%else%} {% endif %}" data-page="dashboard" id="dashboard-page-mobile" data-url="{{url_for('index.dashboard')}}">
            <i class="fas fa-home nav-icon"></i>
            <span class="nav-label">Dashboard</span>
        </div>
        <div class="nav-item {% if active_page == 'profile' %} active {%else%} {% endif %}" data-page="profile" id="profile-page-mobile" data-url="{{url_for('profile.index')}}">
            <i class="fas fa-user nav-icon"></i>
            <span class="nav-label">Profile</span>
        </div>
        <div class="nav-item {% if active_page == 'dietary' %} active {%else%} {% endif %}" data-page="food-log" id="dietary-page-mobile" data-url="{{url_for('dietary.index')}}">
            <i class="fas fa-utensils nav-icon"></i>
            <span class="nav-label">Food Log</span>
        </div>
        <div class="nav-item {% if active_page == 'food reco' %} active {%else%} {% endif %}" data-page="recipes" id="recipes-page-mobile" data-url="{{url_for('food_recommender.index')}}">
            <i class="fas fa-book nav-icon"></i>
            <span class="nav-label">Recipes</span>
        </div>
        {% if user_type in ['admin'] %}
        <div class="nav-item" data-page="admin" id="admin-page-mobile" data-url="{{url_for('admin_dashboard.index')}}">
            <i class="fas fa-cog nav-icon"></i>
            <span class="nav-label">Admin Page</span>
        </div>
        {% endif %}
    </nav>


    <!-- Recipe Details Modal -->
    <div class="recipe-modal" id="recipe-modal">
        <div class="modal-overlay" data-action="close-modal"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="modal-recipe-name">Recipe Name</h2>
                <button class="modal-close-btn" data-action="close-modal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="modal-body">
                <!-- Recipe Image -->
                <div class="recipe-image-section">
                    <img id="modal-recipe-image" src="" alt="Recipe Image" class="modal-recipe-image">
                </div>
                
                <!-- Recipe Details Grid -->
                <div class="recipe-details-grid">
                    <!-- Cooking Time -->
                    <div class="detail-card">
                        <div class="detail-icon">
                            <i class="fas fa-clock"></i>
                        </div>
                        <div class="detail-content">
                            <div class="detail-label">Cooking Time</div>
                            <div class="detail-value" id="modal-cooking-time">25</div>
                        </div>
                    </div>
                    
                    <!-- Serving Size -->
                    <div class="detail-card">
                        <div class="detail-icon">
                            <i class="fas fa-utensils"></i>
                        </div>
                        <div class="detail-content">
                            <div class="detail-label">Serving Size</div>
                            <div class="detail-value" id="modal-serving-size">1 cup</div>
                        </div>
                    </div>
                    
                    <!-- Number of Servings -->
                    <div class="detail-card">
                        <div class="detail-icon">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="detail-content">
                            <div class="detail-label">Servings</div>
                            <div class="detail-value" id="modal-servings">4</div>
                        </div>
                    </div>
                    
                    <!-- Calories -->
                    <div class="detail-card">
                        <div class="detail-icon">
                            <i class="fas fa-fire"></i>
                        </div>
                        <div class="detail-content">
                            <div class="detail-label">Calories</div>
                            <div class="detail-value" id="modal-calories">180 kcal</div>
                        </div>
                    </div>
                </div>
                
                <!-- Ingredients Section -->
                <div class="ingredients-section">
                    <h3 class="section-title">
                        <i class="fas fa-list"></i>
                        Ingredients
                    </h3>
                    <div class="ingredients-list" id="modal-ingredients">
                        <!-- Ingredients will be populated dynamically -->
                    </div>
                </div>
                
                <!-- Procedure Section -->
                <div class="procedure-section">
                    <h3 class="section-title">
                        <i class="fas fa-clipboard-list"></i>
                        Cooking Procedure
                    </h3>
                    <div class="procedure-steps" id="modal-procedure">
                        <!-- Procedure steps will be populated dynamically -->
                    </div>
                </div>
            </div>
            
            <div class="modal-footer">
                <button class="modal-action-btn secondary" data-action="close-modal">
                    <i class="fas fa-times"></i>
                    Close
                </button>
                <button class="modal-action-btn primary" id="save-recipe" data-action="save-recipe">
                    <i class="fas fa-bookmark"></i>
                    Save Recipe
                </button>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS bundle (includes Popper) -->
    <!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script> -->
    <script src="static/js/script.js"></script>
   
    
</body>

</html>